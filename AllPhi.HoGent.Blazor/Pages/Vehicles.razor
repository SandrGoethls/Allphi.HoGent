@page "/vehicles"

@using AllPhi.HoGent.Blazor.Components
@using AllPhi.HoGent.Blazor.Services
@using AllPhi.HoGent.Blazor.Dto

@inject IDriverServices _driverService
@inject IVehicleServices _vehicleService
@inject IFuelCardDriverServices _driverVehicleService

<PageTitle>Vehicles</PageTitle>

@code {
    private VehicleListDto? _vehicleListDto;


    private bool _showSendConfirmation = false;
    private bool _error = false;
    private bool _addNewFuelCard = false;
    private bool _selectedVehicle = false;

    private bool _isSortAscending = true;
    private string _currentSortColumn = "date";
    private int _pageSize = 5;
    private int _pageNumber = 1;
    private int _totalPages;

    private async Task LoadVehicleListDto()
    {
        _vehicleListDto = await _vehicleService.GetAllVehicleAsync(_currentSortColumn, _isSortAscending, _pageNumber, _pageSize);
        _totalPages = (int)Math.Ceiling((double)_vehicleListDto.TotalItems / _pageSize);
    }

    private void AddNewVehicle()
    {
        SetBoolDefault();

        _selectedVehicle = false;
        _addNewFuelCard = true;
    }

    private void SetBoolDefault()
    {
        _showSendConfirmation = false;
        _error = false;
    }
}
